<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>wubigo on wubigo</title>
    <link>https://wubigo.com/</link>
    <description>Recent content in wubigo on wubigo</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Sun, 18 Sep 2022 15:08:18 +0800</lastBuildDate>
    <atom:link href="/" rel="self" type="application/rss+xml" />
    
    <item>
      <title>成功只有一个</title>
      <link>https://wubigo.com/post/only-one-success/</link>
      <pubDate>Sun, 18 Sep 2022 15:08:18 +0800</pubDate>
      
      <guid>https://wubigo.com/post/only-one-success/</guid>
      <description>&lt;p&gt;每隔几年 ，我总要把《明朝那些事儿》最后一章拿来读读，给自己的人生纠偏，而唯一的准星，就是自己本心。最后一章内容如下：&lt;/p&gt;

&lt;p&gt;“其实历史和小说不一样，因为历史的答案，所有人都知道，崇祯同志终究是要死的，而且肯定是吊死，他不会撞墙，不会抹脖子，不会喝敌敌畏，总而言之，我不说，你们都知道。&lt;/p&gt;&lt;p data-pid=&#34;gX2GDJMy&#34;&gt;　　所以结局应该是固定的，没有支线。&lt;/p&gt;&lt;p data-pid=&#34;WP1jaMT5&#34;&gt;　　但是，我的结局，并不是这个。换句话说，我的文章，有两个结局，这只是第一个。&lt;/p&gt;&lt;p data-pid=&#34;hfUOea-l&#34;&gt;　　我读了十五年历史，尊重历史，所以这篇文章从头至尾，不能说无一字无来历，但大多数，都是有出处的。我不敢瞎编。&lt;/p&gt;&lt;p data-pid=&#34;D5KuRAK2&#34;&gt;　　所以第二个结局，也是真实的，只不过比较奇特，它一直在我的脑海里，最后，我决定把这个比较奇特的结局写出来。&lt;/p&gt;&lt;p data-pid=&#34;5fyG3Be0&#34;&gt;　　第二个结局徐宏祖出生的时候，是万历十五年。&lt;/p&gt;&lt;p data-pid=&#34;PYURh63a&#34;&gt;　　在这个特定的年龄出生，真是缘分，但外面的世界，跟徐宏祖并没有多大关系，他的老家在江阴，山清水秀，不用搞政治，也不怕被人砍，比较清净。&lt;/p&gt;&lt;p data-pid=&#34;GQ-PgfC9&#34;&gt;　　当然，清净归清净，在那年头，要想出人头地，青史留名，只有一条路——考试（似乎今天也是）。&lt;/p&gt;&lt;p data-pid=&#34;dg8vEUEH&#34;&gt;　　徐宏祖不想考试，不想出人头地，不想青史留名，他只想玩。&lt;/p&gt;&lt;p data-pid=&#34;W2EU1pBz&#34;&gt;　　按史籍说，是从小就玩，且玩得比较狠，比较特别，不扔沙包，不滚铁环，只是四处瞎转悠，遇到山就爬，遇到河就下，人极小，胆子极大。&lt;/p&gt;&lt;p data-pid=&#34;dIU22eyL&#34;&gt;　　此外，他极其讨厌考试，长大后，让他去考科举，死都不去。该情节，放在现在，大致相当于抗拒高考。&lt;/p&gt;&lt;p data-pid=&#34;8WKi4J74&#34;&gt;　　这号人，当年跟今天的下场，估计是差不多，被拉回家打一半死不活，绝无幸免。&lt;/p&gt;&lt;p data-pid=&#34;HG5rG36Z&#34;&gt;　　然而徐宏祖的父母没有打他，非但没有打他，还告诉他，你要想玩，就玩吧，做自己喜欢做的事情就行。&lt;/p&gt;&lt;p data-pid=&#34;wPlxp31w&#34;&gt;　　这种看似惊世骇俗的思想，似乎很不合理，但对徐家人而言，很合理。&lt;/p&gt;&lt;p data-pid=&#34;aRuoGDCX&#34;&gt;　　对了，应该介绍一下徐宏祖同志的家世，虽然他的父母，并非什么大人物，也没名气，但他有一位祖先，还算是很有名的，当然，不是好名。&lt;/p&gt;&lt;p data-pid=&#34;Va1uKN_b&#34;&gt;　　在徐宏祖出生前九十年，徐家的一位先辈进京赶考，路上遇到了一位同伴，叫做唐寅，又叫唐伯虎。&lt;/p&gt;&lt;p data-pid=&#34;RYfyH5Vi&#34;&gt;　　没错，他就是徐经。&lt;/p&gt;&lt;p data-pid=&#34;tgoH9jYJ&#34;&gt;　　后来的事情，之前讲过，据说是徐经作弊，结果拉上了唐伯虎，大家一起完蛋，进士没考上，连举人都没了，所以徐经同志痛定思痛，对坑害了无数人（主要是他）的科举制度深恶痛绝，教育子孙，要与这个万恶的制度决裂，爱考不考，去他娘的。&lt;/p&gt;&lt;p data-pid=&#34;uol5AM5r&#34;&gt;　　对这段百年恩怨，徐宏祖是否了解，不清楚，但他会用，那是肯定的。更重要的是，徐家虽说没有级别，还有点钱，所以他决定，索性不考了，出去旅游。&lt;/p&gt;&lt;p data-pid=&#34;imNcawXE&#34;&gt;　　刚开始，他旅游的范围，主要是江浙一带，比如紫金山、太湖、普陀山等等。后来愈发勇猛，又去了雁荡山、九华山、黄山、武夷山、庐山等等。&lt;/p&gt;&lt;p data-pid=&#34;V4_cmLwh&#34;&gt;　　但这里，存在着一个问题——钱。&lt;/p&gt;&lt;p data-pid=&#34;CXmhLqWh&#34;&gt;　　旅行家和大侠的区别在于，旅行家是要花钱的，列一下，大致包括以下费用：交通费、住宿费、导游费、餐饮费、门票费，如果地方不地道，还有个挨宰费。&lt;/p&gt;&lt;p data-pid=&#34;oekI76Dx&#34;&gt;　　我说过，徐家是有钱的，但只是有点钱，没有很多钱，大约也就是个中产阶级。按今天的标准，一年去旅游一次，也就够了，但徐宏祖的旅行日程是：一年休息一次。&lt;/p&gt;&lt;p data-pid=&#34;Ll8B_8AQ&#34;&gt;　　他除了年底回家照顾父母外，一年到头都在外面，但就这么个搞法，他家竟然还过得去。&lt;/p&gt;&lt;p data-pid=&#34;45vYEKuY&#34;&gt;　　原因很简单，比如交通费，他不坐火车、也不坐汽车（想坐也没），少数骑马，多靠步行（骑马爬山试试）。&lt;/p&gt;&lt;p data-pid=&#34;Zx53atfC&#34;&gt;　　住宿费，基本不需要，徐宏祖去的地方，当年大都没有人去，别说三星级，连孙二娘的黑店都没有，树林里、悬崖上，打个地铺，也就睡了。&lt;/p&gt;&lt;p data-pid=&#34;fx7SpwHV&#34;&gt;　　餐饮费，也没有，我考察过，徐宏祖同志去的地方，也没什么餐馆，每次他出发的时候，都是带着干粮，而且他很扛饿，据说能扛七八天，至于喝水，山里面，那都是矿泉水。&lt;/p&gt;&lt;p data-pid=&#34;gMY-pQzv&#34;&gt;　　门票费也是不用了，当年谁要能在徐宏祖同志去的地方，设个点收门票，那只能说明，他比徐宏祖还牛，该收。&lt;/p&gt;&lt;p data-pid=&#34;7jNqChf9&#34;&gt;　　挨宰费是没有的，但挨宰是可能的，且比较敞亮，从没有暗地加价坑钱，都是拿刀，明着来抢。要知道，没门票的地方，固然没有奸商，却很可能有强盗。&lt;/p&gt;&lt;p data-pid=&#34;aoIeNtRM&#34;&gt;　　据本人考证，徐宏祖最大的花销，是导游费用。作为一个旅行家，徐宏祖很清楚，什么都能省，这笔钱是不能省的，否则走到半山腰，给你挖个坑，让你钻个洞，那就休息了。&lt;/p&gt;&lt;p data-pid=&#34;yoA0mNGV&#34;&gt;　　就这样，家境并不十分富裕的徐宏祖，穿着俭朴的衣服，没有随从，没有护卫，带着干粮，独自前往名山大川，风餐露宿，不怕吃苦，不怕挨饿，一年只回一次家，只为攀登。&lt;/p&gt;&lt;p data-pid=&#34;priHLxeD&#34;&gt;　　从俗世的角度，徐宏祖是个怪人，这人不考功名，不求做官，不成家立业，按很多人的说法，是毁了。&lt;/p&gt;&lt;p data-pid=&#34;goXMOHKb&#34;&gt;　　我知道，很多人还会说，这种生活荒谬，是不符合常规的，是不正常的，是缺根弦的，是精神有问题的。&lt;/p&gt;&lt;p data-pid=&#34;HqoI1uV2&#34;&gt;　　我认为，说这些话的人，是吃饱了，撑的，人只活一辈子，如何生活，都是自己的事，自己这辈子浑浑噩噩地没活好，厚着脸皮还来指责别人，有多远，就去滚多远。&lt;/p&gt;&lt;p data-pid=&#34;KJh1JJnc&#34;&gt;　　徐宏祖旅行的唯一阻力，是他的父母。他的父亲去世较早，只剩他的母亲无人照料。圣人曾经教导我们：父母在，不远游。&lt;/p&gt;&lt;p data-pid=&#34;2ZLa6ycG&#34;&gt;　　所以在出发前，徐宏祖总是很犹豫，然而他的母亲找到他，对他说了这样一番话：“男儿志在四方，当往天地间一展胸怀！”&lt;/p&gt;&lt;p data-pid=&#34;IOuFO71a&#34;&gt;　　就这样，徐宏祖开始了他伟大的历程。&lt;/p&gt;&lt;p data-pid=&#34;jJ1DpFdh&#34;&gt;　　他二十岁离家，穿着布衣，没有政府支持，没有朋友帮助，独自一人，游历天下二十余年，他去过的地方，包括湖广、四川、辽东、西北，简单地说，全国十三省，全部走遍。&lt;/p&gt;&lt;p data-pid=&#34;3BQv-3-j&#34;&gt;　　他爬过的山，包括泰山、华山、衡山、嵩山、终南山、峨眉山，简单地说，你听过的，他都去过，你没听过的，他也去过。&lt;/p&gt;&lt;p data-pid=&#34;22oihnTz&#34;&gt;　　此外，黄河、长江、洞庭湖、鄱阳湖，金沙江、汉江，几乎所有江河湖泊，全部游历。&lt;/p&gt;&lt;p data-pid=&#34;lZqWZyMd&#34;&gt;　　在游历的过程中，他曾三次遭遇强盗，被劫去财物，身负刀伤，还由于走进大山，无法找到出路，数次断粮，几乎饿死。最悬的一次，是在西南。&lt;/p&gt;&lt;p data-pid=&#34;BWXjMMn7&#34;&gt;　　当时，他前往云贵一带，结果走到半路，突然发现交通中断，住处被当地土著围，过了几天，外面又来了明军，又开始围，围了几天，就开始打，打了几天，就开始乱。徐宏祖好歹是见过世面的，跑得快，总算顺利脱身。&lt;/p&gt;&lt;p data-pid=&#34;D_jxQUCr&#34;&gt;　　在旅行的过程中，他还开始记笔记，每天的经历，他都详细记录下来，鉴于他本人除姓名外，还有个号，叫做霞客，所以后来，他的这本笔记，就被称为《徐霞客游记》。&lt;/p&gt;&lt;p data-pid=&#34;BaDJYatg&#34;&gt;　　崇祯九年（1636），五十岁的徐宏祖决定，再次出游，这也是他的最后一次出游，虽然他自己没有想到。&lt;/p&gt;&lt;p data-pid=&#34;t_MovUTB&#34;&gt;　　正当他考虑出游方向的时候，一个和尚找到了他。&lt;/p&gt;&lt;p data-pid=&#34;5jqy1cEs&#34;&gt;  　  这个和尚的法号，叫做静闻，家住南京，他十分虔诚，非常崇敬鸡足山迦叶寺的菩萨，还曾刺破手指，血写过一本法华经。&lt;/p&gt;&lt;p data-pid=&#34;Sb_8VPeS&#34;&gt;　　鸡足山在云南。&lt;/p&gt;&lt;p data-pid=&#34;heCmIoDW&#34;&gt;　　当时的云南鸡足山，算是蛮荒之地，啥也不通，要去，只能走着去。&lt;/p&gt;&lt;p data-pid=&#34;yy2AODbS&#34;&gt;　　很明显，静闻是个明白人，他知道自己要一个人去，估计到半路就歇了，必须找一个同伴。&lt;/p&gt;&lt;p data-pid=&#34;ESH3HyNC&#34;&gt;　　徐宏祖的名气，在当时已经很大了，所以他专门找上门来，要跟他一起走。&lt;/p&gt;&lt;p data-pid=&#34;NahsOclx&#34;&gt;　　对徐宏祖而言，去哪里，倒是个无所谓的事，就答应了他，两个人一起出发了。&lt;/p&gt;&lt;p data-pid=&#34;JGww-DLK&#34;&gt;　　他们的路线是这样的，先从南直隶出发，过湖广，到广西，进入四川，最后到达云贵。&lt;/p&gt;&lt;p data-pid=&#34;WQdoLd6N&#34;&gt;　　不用到达云贵，因为到湖广，就出事了。&lt;/p&gt;&lt;p data-pid=&#34;ZBP96L_g&#34;&gt;　　走到湖广湘江（今湖南），没法走了，两人坐船准备渡江。&lt;/p&gt;&lt;p data-pid=&#34;ydKkYd7r&#34;&gt;　　渡到一半，遇上了强盗。&lt;/p&gt;&lt;p data-pid=&#34;dHPCWRv_&#34;&gt;　　对徐宏祖而言，从事这种职业的人，他已经遇到好几次了，但静闻大师，应该是第一次。此后的具体细节不太清楚，反正徐宏祖赶跑了强盗，但静闻在这场风波中受了伤，加上他的体质较弱，刚撑到广西，就圆寂了。&lt;/p&gt;&lt;p data-pid=&#34;BINPjpaB&#34;&gt;　　徐宏祖停了下来，办理静闻的后事。&lt;/p&gt;&lt;p data-pid=&#34;U_tCJ-qk&#34;&gt;　　由于路上遭遇强盗，此时，徐宏祖的路费已经不足了，如果继续往前走，后果难以预料。&lt;/p&gt;&lt;p data-pid=&#34;76s2k-WF&#34;&gt;　　所以当地人劝他，放弃前进念头，回家。&lt;/p&gt;&lt;p data-pid=&#34;ipD4AzLE&#34;&gt;　　徐宏祖跟静闻，是素不相识的，说到底，也就是个伴，各有各的想法，静闻没打算写游记，徐宏祖也没打算去礼佛，实在没有什么交情。而且我还查过，他此前去过鸡足山，这次旅行对他而言，并没有太大的意义。&lt;/p&gt;&lt;p data-pid=&#34;SM45IKTF&#34;&gt;　　然而他说，我要继续前进，去鸡足山。&lt;/p&gt;&lt;p data-pid=&#34;qcQ6FmTh&#34;&gt;　　当地人问：为什么要去。&lt;/p&gt;&lt;p data-pid=&#34;iEI9sqdM&#34;&gt;　　徐宏祖答：我答应了他，要带他去鸡足山。&lt;/p&gt;&lt;p data-pid=&#34;I-J-TaKe&#34;&gt;　　可是，他已经去世了。&lt;/p&gt;&lt;p data-pid=&#34;OdBnjaTI&#34;&gt;　　我带着他的骨灰去。答应他的事情，我要帮他做到。&lt;/p&gt;&lt;p data-pid=&#34;j1hSct2E&#34;&gt;　　徐宏祖出发了，为了一个逝去者的愿望，为了实现自己的承诺，虽然这个逝去者，他并不熟悉。&lt;/p&gt;&lt;p data-pid=&#34;UwK2nmA_&#34;&gt;　　旅程很艰苦，没有路费的徐宏祖背着静闻的骨灰，没有任何资助，他只能住在荒野，靠野菜干粮充饥，为了能够继续前行，他还当掉了自己所能当掉的东西，只是为了一个承诺。&lt;/p&gt;&lt;p data-pid=&#34;ss57psm0&#34;&gt;　　就这样，他按照原定路线，带着静闻，翻阅了广西十万大山，然后进入四川，越过峨眉山，沿着岷江，到达甘孜松潘。&lt;/p&gt;&lt;p data-pid=&#34;d0mEoZ6v&#34;&gt;　　渡过金沙江，渡过澜沧江，经过丽江、经过西双版纳，到达鸡足山。&lt;/p&gt;&lt;p data-pid=&#34;G_xzX_x4&#34;&gt;　　迦叶寺里，他解开了背上的包裹，拿出了静闻的骨灰。&lt;/p&gt;&lt;p data-pid=&#34;q8O0nfz4&#34;&gt;　　到了。&lt;/p&gt;&lt;p data-pid=&#34;NCFFPx2Z&#34;&gt;　　我们到了。&lt;/p&gt;&lt;p data-pid=&#34;T2hSf7CZ&#34;&gt;　　他郑重地把骨灰埋在了迦叶寺里，在这里，他兑现了承诺。&lt;/p&gt;&lt;p data-pid=&#34;dyPSgLvi&#34;&gt;　　然后，他应该回家了。&lt;/p&gt;&lt;p data-pid=&#34;cbB2x7yZ&#34;&gt;　　但他没有。&lt;/p&gt;&lt;p data-pid=&#34;6FRkOP12&#34;&gt;　　从某个角度讲，这是上天对他的恩赐，因为这将是他的最后一次旅途，能走多远，就走多远吧。&lt;/p&gt;&lt;p data-pid=&#34;Pl8x0NYb&#34;&gt;　　他离开鸡足山，又继续前行，行进半年，翻越了昆仑山，又行进半年，进入藏区，游历几个月后，踏上归途。&lt;/p&gt;&lt;p data-pid=&#34;gMNryFfk&#34;&gt;　　回去没多久，就病了。&lt;/p&gt;&lt;p data-pid=&#34;n58T3yWk&#34;&gt;　　喜欢锻炼的人，身体应该比较好，天天锻炼的人（比如运动员），就不一定好，旅游也是如此。&lt;/p&gt;&lt;p data-pid=&#34;2oWZgJN-&#34;&gt;　　估计是长年劳累，徐宏祖终究是病倒了，没能再次出行。崇祯十四年（1641），病重逝世，年五十四。&lt;/p&gt;&lt;p data-pid=&#34;iqgpqEJA&#34;&gt;　　他所留下的笔记，据说总共有两百多万字，可惜没有保留下来，剩余的部分，大约几十万字，被后人编成《徐霞客游记》。&lt;/p&gt;&lt;p data-pid=&#34;4AzHH-X4&#34;&gt;　　在这本书里，记载了祖国山川的详细情况，涉及地理、水利、地貌等情况，被誉为十七世纪最伟大的地理学著作，翻译成几十国语言，流传世界。&lt;/p&gt;&lt;p data-pid=&#34;PyuAx7Pc&#34;&gt;        好的，总结应该出来了，这是一个伟大的地理学家的故事，他为了研究地理，四处游历，为地理学的发展做出了突出贡献，是中华民族的骄傲。&lt;/p&gt;&lt;p data-pid=&#34;c0PcFaGZ&#34;&gt;       是这样吗？&lt;/p&gt;&lt;p data-pid=&#34;QDEVePWz&#34;&gt;　　不是的。&lt;/p&gt;&lt;p data-pid=&#34;kZW2omW-&#34;&gt;　　其实讲述这人的故事，只想探讨一个问题，他为何要这样做。&lt;/p&gt;&lt;p data-pid=&#34;6eL49ZFZ&#34;&gt;　　没有资助，没有承认（至少生前没有），没有利益，没有前途，放弃一切，用一生的时间，只是为了游历？&lt;/p&gt;&lt;p data-pid=&#34;bo1dCA2L&#34;&gt;　　究竟为了什么？&lt;/p&gt;&lt;p data-pid=&#34;o3aXUlz7&#34;&gt;　　我很疑惑，很不解，于是我想起另一个故事。&lt;/p&gt;&lt;p data-pid=&#34;vOmIdg85&#34;&gt;　　新西兰登山家希拉里，在登上珠穆朗玛峰后，经常被记者问一个问题：你为什么要爬？&lt;/p&gt;&lt;p data-pid=&#34;UOIJwDmI&#34;&gt;　　他总不回答，于是记者总问，终于有一次，他答出了一个让所有人都无法再问的答案：因为它（指珠峰），就在那里！&lt;/p&gt;&lt;p data-pid=&#34;pIqidYdB&#34;&gt;　　因为它就在那里。&lt;/p&gt;&lt;p data-pid=&#34;yMrFql7_&#34;&gt;　　其实这个世上很多事，本不需要理由，之所以需要理由，是因为很多人喜欢找抽，抽久了，就需要理由了。&lt;/p&gt;&lt;p data-pid=&#34;_5jYmryZ&#34;&gt;　　正如徐霞客临终前，所说的那句话：“汉代的张骞，唐代的玄奘，元代的耶律楚材，他们都曾游历天下，然而，他们都是接受了皇帝的命令，受命前往四方。”&lt;/p&gt;&lt;p data-pid=&#34;TFxJQxR_&#34;&gt;　　“我只是个平民，没有受命，只是穿着布衣，拿着拐杖，穿着草鞋，凭借自己，游历天下，故虽死，无憾。”&lt;/p&gt;&lt;p data-pid=&#34;dgbrp0IH&#34;&gt;　　说完了。&lt;/p&gt;&lt;p data-pid=&#34;37Z_TiMy&#34;&gt;　　我要讲的那样东西，就在这个故事里。&lt;/p&gt;&lt;p data-pid=&#34;LFYsh9mG&#34;&gt;　　我相信，很多人会问，你讲了什么？&lt;/p&gt;&lt;p data-pid=&#34;EJ1F0tzU&#34;&gt;　　用如此之多的篇幅，讲述一个王朝的兴起和衰落，在终结的时候，却说了这样一个故事，你到底想说什么？&lt;/p&gt;&lt;p data-pid=&#34;Gb7VACJv&#34;&gt;　　我重复一遍，我要讲的那样东西，就在这个故事里，已经讲完了。&lt;/p&gt;&lt;p data-pid=&#34;v7si1j3_&#34;&gt;　　所以后面的话，是讲给那些不明白的人，明白的人，就不用继续看了。&lt;/p&gt;&lt;p data-pid=&#34;CkhR5585&#34;&gt;　　此前，我讲过很多东西，很多兴衰起落、很多王侯将相、很多无奈更替、很多风云变幻，但这件东西，我个人认为，是最重要的。&lt;/p&gt;&lt;p data-pid=&#34;GxuSeMx5&#34;&gt;　　因为我要告诉你，所谓千秋霸业，万古流芳，以及一切的一切，只是粪土。先变成粪，再变成土。&lt;/p&gt;&lt;p data-pid=&#34;msXzEKLY&#34;&gt;　　现在你不明白，将来你会明白，将来不明白，就再等将来，如果一辈子都不明白，也行。&lt;/p&gt;&lt;p data-pid=&#34;2wON-Eq_&#34;&gt;　　而最后讲述的这件东西，它超越上述的一切，至少在我看来。&lt;/p&gt;&lt;p data-pid=&#34;jDG3Qb3p&#34;&gt;　　但这件东西，我想了很久，也无法用准确的语言，或是词句来表达，用最欠揍的话说，是只可意会，不可言传。&lt;/p&gt;&lt;p data-pid=&#34;1CEcPZRE&#34;&gt;　　然而我终究是不欠揍的，在遍阅群书，却无从开口之后，我终于从一本不起眼，且无甚价值的读物上，找到了这句适合的话。&lt;/p&gt;&lt;p data-pid=&#34;-MJgUG1D&#34;&gt;　　这是一本台历，一本放在我面前，不知过了多久，却从未翻过，早已过期的台历。&lt;/p&gt;&lt;p data-pid=&#34;r6pls3k1&#34;&gt;　　我知道，是上天把这本台历放在了我的桌前，它看着几年来我每天的努力，始终的坚持，它静静地，耐心地等待着终结。&lt;/p&gt;&lt;p data-pid=&#34;fo_u-YfV&#34;&gt;　　它等待着，在即将结束的那一天，我将翻开这本陪伴我始终，却始终未曾翻开的台历，在上面，有着最后的答案。&lt;/p&gt;&lt;p data-pid=&#34;6Hw_86zv&#34;&gt;　　我翻开了它，在这本台历上，写着一句连名人是谁都没说明白的名人名言。&lt;/p&gt;&lt;p data-pid=&#34;3Z_p4FGx&#34;&gt;　　是的，这就是我想说的，这就是我想通过徐霞客所表达的，足以藐视所有王侯将相，最完美的结束语：成功只有一个——按照自己的方式，去度过人生。”&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>KVM(Keyboard, Video, and Mouse) Over IP</title>
      <link>https://wubigo.com/post/kvm-over-ip/</link>
      <pubDate>Fri, 22 Jul 2022 22:05:52 +0800</pubDate>
      
      <guid>https://wubigo.com/post/kvm-over-ip/</guid>
      <description></description>
    </item>
    
    <item>
      <title>Postgres and Pgcli</title>
      <link>https://wubigo.com/post/postgres-and-pgcli/</link>
      <pubDate>Sat, 02 Jul 2022 08:43:54 +0800</pubDate>
      
      <guid>https://wubigo.com/post/postgres-and-pgcli/</guid>
      <description>

&lt;h1 id=&#34;start-pg&#34;&gt;START PG&lt;/h1&gt;

&lt;pre&gt;&lt;code&gt;version: &#39;2&#39;

services:
  postgresql:
    container_name: pg
    image: postgres:12
    ports:
      - &#39;5432:5432&#39;
    volumes:
      - &#39;postgresql_data:/var/lib/postgresql/data&#39;
    environment:
      - &#39;POSTGRES_PASSWORD=!Qsx4rgb&#39;
      - &#39;PGDATA=/var/lib/postgresql/data/pgdata&#39;

  # adminer:
  #   image: adminer
  #   restart: always
  #   ports:
  #     - 8080:8080

volumes:
  postgresql_data:
    driver: local

&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=&#34;安装pgcli&#34;&gt;安装pgcli&lt;/h1&gt;

&lt;pre&gt;&lt;code&gt;sudo apt install libpq-dev
pip install -U pgcli
export PATH=$PATH:/home/ubuntu/.local/bin
pgcli -U postgres -h localhost

&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=&#34;更改配置&#34;&gt;更改配置&lt;/h1&gt;

&lt;pre&gt;&lt;code&gt;postgres@localhost&amp;gt; alter system set autovacuum = off;
postgres@localhost&amp;gt; SELECT pg_reload_conf();
postgres@localhost&amp;gt; show autovacuum;
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>Windows 11核心系统服务列表</title>
      <link>https://wubigo.com/post/default-services-in-windows-11/</link>
      <pubDate>Tue, 28 Jun 2022 11:09:12 +0800</pubDate>
      
      <guid>https://wubigo.com/post/default-services-in-windows-11/</guid>
      <description>&lt;p&gt;因为禁用了下列服务：&lt;/p&gt;

&lt;p&gt;Application Information                Appinfo&lt;/p&gt;

&lt;p&gt;导致无法打开系统高级设置，SERVICES.MSC&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://www.elevenforum.com/t/restore-default-services-in-windows-11.3109/&#34; target=&#34;_blank&#34;&gt;https://www.elevenforum.com/t/restore-default-services-in-windows-11.3109/&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>CAN总线消息格式DBC_Format</title>
      <link>https://wubigo.com/post/iov-can-msg-dbc_format/</link>
      <pubDate>Sun, 22 May 2022 16:30:53 +0800</pubDate>
      
      <guid>https://wubigo.com/post/iov-can-msg-dbc_format/</guid>
      <description>

&lt;h1 id=&#34;can消息总线格式&#34;&gt;CAN消息总线格式&lt;/h1&gt;

&lt;h2 id=&#34;dbc格式&#34;&gt;DBC格式&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;BO_ 500 IO_DEBUG: 4 IO
 SG_ IO_DEBUG_test_unsigned : 0|8@1+ (1,0) [0|0] &amp;quot;&amp;quot; DBG
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;说明：&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;The message name is IO_DEBUG and MID is 500 (decimal), and the length is 4 bytes (though we only need 1 for 8-bit signal)&lt;/li&gt;
&lt;li&gt;The sender is IO&lt;/li&gt;
&lt;li&gt;0|8: The unsigned signal starts at bit position 0, and the size of this signal is 8&lt;/li&gt;
&lt;li&gt;(1,0): The scale and offset (discussed later)&lt;/li&gt;
&lt;li&gt;[0|0]: Min and Max is not defined (discussed later)&lt;/li&gt;
&lt;li&gt;&amp;rdquo;&amp;rdquo;: There are no units (it could be, for instance &amp;ldquo;inches&amp;rdquo;)&lt;/li&gt;
&lt;li&gt;@1+: Defines that the signal is little-endian, and unsigned: Never change this!&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;[1] &lt;a href=&#34;http://socialledge.com/sjsu/index.php/DBC_Format&#34; target=&#34;_blank&#34;&gt;CAN DBC&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Data Lake Notes</title>
      <link>https://wubigo.com/post/data-lake-notes/</link>
      <pubDate>Wed, 11 May 2022 19:59:38 +0800</pubDate>
      
      <guid>https://wubigo.com/post/data-lake-notes/</guid>
      <description>

&lt;h2 id=&#34;three-main-use-cases-for-metadata-repositories&#34;&gt;three main use cases for metadata repositories:&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Finding data assets
For example, a data architect may want to know which tables in which databases
contain a Customer_ID.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Tracking lineage (provenance)
Many regulations require enterprises to document the lineage of data assets—in
other words, where the data for those assets came from and how it was generated
or transformed.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Impact analysis
If developers are making changes in a complex ecosystem, there is always a dan‐
ger of breaking something. Impact analysis allows developers to see all the data
assets that rely on a particular field or integration job before making a change&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;data-governance&#34;&gt;Data governance&lt;/h2&gt;

&lt;p&gt;tools record, document, and sometimes manage governance poli‐cies. The tools usually
define who the data steward is for each data asset. Data stew‐
ards are responsible for making sure the data assets are correct, documenting their
purpose and lineage, and defining access and lifecycle management policies for them&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Edgex Onvif Device Dev Setup</title>
      <link>https://wubigo.com/post/edgex-onvif-device-dev-setup/</link>
      <pubDate>Fri, 18 Mar 2022 10:58:46 +0800</pubDate>
      
      <guid>https://wubigo.com/post/edgex-onvif-device-dev-setup/</guid>
      <description>

&lt;h1 id=&#34;启动edgex核心服务&#34;&gt;启动EDGEX核心服务&lt;/h1&gt;

&lt;h2 id=&#34;使用容器主机网络&#34;&gt;使用容器主机网络&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;wget https://raw.githubusercontent.com/edgexfoundry/edgex-compose/jakarta/docker-compose-no-secty.yml
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;在开发环境使用host网络，便于核心服务和各种设备能在同一个子网，替换&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;networks:
      edgex-network: {}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;为&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;network_mode: host
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;consul&#34;&gt;CONSUL&lt;/h3&gt;

&lt;p&gt;配置CONSUL绑定到指定以太网卡&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;environment:
      CONSUL_BIND_INTERFACE: ens3
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;配置dns&#34;&gt;配置DNS&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;/etc/hosts&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;10.166.44.182 edgex-core-consul
10.166.44.182 edgex-core-command
10.166.44.182 edgex-redis
10.166.44.182 edgex-core-metadata
10.166.44.182 edgex-core-data
10.166.44.182 edgex-support-notifications
10.166.44.182 edgex-support-scheduler
10.166.44.182 edgex-ui-go
10.166.44.182 edgex-kuiper
10.166.44.182 edgex-app-rules-engine
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;启动核心服务&#34;&gt;启动核心服务&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;docker-compose -f docker-compose-no-secty.yml up -d 
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;检查核心服务启动正常&#34;&gt;检查核心服务启动正常&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;docker logs -f edgex-core-command edgex-core-data edgex-core-metadata
&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=&#34;在本地启动设备服务&#34;&gt;在本地启动设备服务&lt;/h1&gt;

&lt;pre&gt;&lt;code&gt;git clone git@github.com:edgexfoundry/device-camera-go.git
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;修改&lt;code&gt;cmd\res\configuration.toml&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;注册服务，消息队列，核心服务的所在的主机配置&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[Registry]
Type = &amp;quot;consul&amp;quot;
Host = &amp;quot;10.166.44.182&amp;quot;
Port = 8500

[MessageQueue]
Protocol = &amp;quot;redis&amp;quot;
Host = &amp;quot;10.166.44.182&amp;quot;

[Clients.core-data]
  Protocol = &amp;quot;http&amp;quot;
  Host = &amp;quot;10.166.44.182&amp;quot;
  Port = 59880

  [Clients.core-metadata]
  Protocol = &amp;quot;http&amp;quot;
  Host = &amp;quot;10.166.44.182&amp;quot;
  Port = 59881
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;连接onvif摄像头&#34;&gt;连接ONVIF摄像头&lt;/h2&gt;

&lt;h2 id=&#34;启动onvif摄像头服务&#34;&gt;启动ONVIF摄像头服务&lt;/h2&gt;

&lt;h2 id=&#34;启动设备服务&#34;&gt;启动设备服务&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;cd device-camera-go/cmd
set EDGEX_SECURITY_SECRET_STORE=false
go run main.go
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;查看设备资源&#34;&gt;查看设备资源&lt;/h2&gt;

&lt;p&gt;curl -X GET &lt;a href=&#34;http://10.166.44.182:59882/api/v2/device/name/Camera001&#34; target=&#34;_blank&#34;&gt;http://10.166.44.182:59882/api/v2/device/name/Camera001&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;建议：请使用postman测试，&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;            {
                &amp;quot;name&amp;quot;: &amp;quot;OnvifSnapshot&amp;quot;,
                &amp;quot;get&amp;quot;: true,
                &amp;quot;path&amp;quot;: &amp;quot;/api/v2/device/name/Camera001/OnvifSnapshot&amp;quot;,
                &amp;quot;url&amp;quot;: &amp;quot;http://edgex-core-command:59882&amp;quot;,
                &amp;quot;parameters&amp;quot;: [
                    {
                        &amp;quot;resourceName&amp;quot;: &amp;quot;OnvifSnapshot&amp;quot;,
                        &amp;quot;valueType&amp;quot;: &amp;quot;Binary&amp;quot;
                    }
                ]
            },
            {
                &amp;quot;name&amp;quot;: &amp;quot;OnvifHostname&amp;quot;,
                &amp;quot;get&amp;quot;: true,
                &amp;quot;set&amp;quot;: true,
                &amp;quot;path&amp;quot;: &amp;quot;/api/v2/device/name/Camera001/OnvifHostname&amp;quot;,
                &amp;quot;url&amp;quot;: &amp;quot;http://edgex-core-command:59882&amp;quot;,
                &amp;quot;parameters&amp;quot;: [
                    {
                        &amp;quot;resourceName&amp;quot;: &amp;quot;OnvifHostname&amp;quot;,
                        &amp;quot;valueType&amp;quot;: &amp;quot;String&amp;quot;
                    }
                ]
            }
````

postmana返回的路径可以直接点击，并直接调用相应的资源

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;a href=&#34;http://10.166.44.182:59882/api/v2/device/name/Camera001/OnvifSnapshot&#34; target=&#34;_blank&#34;&gt;http://10.166.44.182:59882/api/v2/device/name/Camera001/OnvifSnapshot&lt;/a&gt;
```&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>如何实现Edgex设备服务</title>
      <link>https://wubigo.com/post/edgex-device-service-onvif/</link>
      <pubDate>Thu, 17 Mar 2022 17:29:55 +0800</pubDate>
      
      <guid>https://wubigo.com/post/edgex-device-service-onvif/</guid>
      <description>

&lt;h1 id=&#34;加载设备配置文件&#34;&gt;加载设备配置文件&lt;/h1&gt;

&lt;pre&gt;&lt;code&gt;device-sdk-go:
service.init.go:   
       driver.Initialize
             initializeOnvifClient
                onvif4go.NewOnvifDevice.Initialize()
       provision.LoadProfiles(ds.config.Device.ProfilesDir, dic)
       provision.LoadDevices

&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=&#34;驱动服务客户端初始化与核心数据和命令服务&#34;&gt;驱动服务客户端初始化与核心数据和命令服务&lt;/h1&gt;

&lt;pre&gt;&lt;code&gt;clients.BootstrapHandler -&amp;gt; InitDependencyClients

// InitDependencyClients triggers Service Client Initializer to establish connection to Metadata and Core Data Services
// through Metadata Client and Core Data Client.
// Service Client Initializer also needs to check the service status of Metadata and Core Data Services,
// because they are important dependencies of Device Service.
// The initialization process should be pending until Metadata Service and Core Data Service are both available.
&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=&#34;驱动&#34;&gt;驱动&lt;/h1&gt;

&lt;pre&gt;&lt;code&gt;func (d *Driver) Initialize     -&amp;gt;    loadCameraConfig
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;diff --git a/internal/driver/driver.go b/internal/driver/driver.go

@@ -388,7 +389,7 @@ func (d *Driver) Initialize(lc logger.LoggingClient, asyncCh 
-
+       debug.PrintStack()
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;runtime/debug.Stack()
        C:/local/go/src/runtime/debug/stack.go:24 +0x7a
runtime/debug.PrintStack()
        C:/local/go/src/runtime/debug/stack.go:16 +0x19
github.com/edgexfoundry/device-camera-go/internal/driver.(*Driver).Initialize(0xc00034fa00, {0x14495f0, 0xc0003714a0}, 0xc000480060, 0x0)        
        D:/code/go/src/github.com/edgexfoundry/device-camera-go/internal/driver/driver.go:392 +0xc7
github.com/edgexfoundry/device-sdk-go/v2/pkg/service.(*Bootstrap).BootstrapHandler(0xc0000d26e0, {0x14408d8, 0xc00036b0c0}, 0xc000388680, {{0xc08
38af7a5288f3c, 0xf37d35, 0x17238c0}, 0xdf8475800, 0x3b9aca00}, 0xc00034fa80)
        D:/code/go/pkg/mod/github.com/edgexfoundry/device-sdk-go/v2@v2.2.0-dev.8/pkg/service/init.go:55 +0x62d
github.com/edgexfoundry/go-mod-bootstrap/v2/bootstrap.RunAndReturnWaitGroup({0x14408d8, 0xc00036b0c0}, 0xc0003827f0, {0x1446b90, 0xc000351500}, {
0x13d7f8f, 0xd}, {0x13d868d, 0xe}, {0x1445710, ...}, ...)
        D:/code/go/pkg/mod/github.com/edgexfoundry/go-mod-bootstrap/v2@v2.1.0/bootstrap/bootstrap.go:158 +0xa33
github.com/edgexfoundry/go-mod-bootstrap/v2/bootstrap.Run({0x14408d8, 0xc00036b0c0}, 0xc0003827f0, {0x1446b90, 0xc000351500}, {0x13d7f8f, 0xd}, {
0x13d868d, 0xe}, {0x1445710, ...}, ...)
        D:/code/go/pkg/mod/github.com/edgexfoundry/go-mod-bootstrap/v2@v2.1.0/bootstrap/bootstrap.go:184 +0x19c
github.com/edgexfoundry/device-sdk-go/v2/pkg/service.Main({0x13d7f8f, 0xd}, {0x13e0370, 0x1a}, {0x1391bc0, 0xc00034fa00}, {0x14408d8, 0xc00036b0c
0}, 0xc0003827f0, 0xc0002c1bc0)
        D:/code/go/pkg/mod/github.com/edgexfoundry/device-sdk-go/v2@v2.2.0-dev.8/pkg/service/main.go:66 +0x9b3
github.com/edgexfoundry/device-sdk-go/v2/pkg/startup.Bootstrap({0x13d7f8f, 0xd}, {0x13e0370, 0x1a}, {0x1391bc0, 0xc00034fa00})
        D:/code/go/pkg/mod/github.com/edgexfoundry/device-sdk-go/v2@v2.2.0-dev.8/pkg/startup/bootstrap.go:19 +0x11a
main.main()
        D:/code/go/src/github.com/edgexfoundry/device-camera-go/cmd/main.go:22 +0x4c

&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;onvifclient&#34;&gt;OnvifClient&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/faceterteam/onvif4go&#34; target=&#34;_blank&#34;&gt;onvif4go&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;onvif网络视频设备&#34;&gt;ONVIF网络视频设备&lt;/h2&gt;

&lt;p&gt;ONVIF提供一系列被清楚定义的网络服务给符合ONVIF标准的设备及客户。此外，一些条件功能只能在特定的产品中才能实现。例如要实现摄像机的PTZ功能，必须要在接口处提供特定的支持服务才可以实现，可选的服务也都须被定义。产品必须详细说明所支持的服务及功能。在开发上非常简便，软件客户端可以查询符合ONVIF标准的设备，获取产品的服务与功能列表。例如图像服务是可选受理的服务，客户端可以通过设备管理服务的“能力获取”（GetCapabilities）查询该服务的可用性。这意味着集成商可以在软件中自动侦测产品所支持的服务及功能&lt;/p&gt;

&lt;h1 id=&#34;device-usb-camera&#34;&gt;device-usb-camera&lt;/h1&gt;

&lt;pre&gt;&lt;code&gt;wget https://raw.githubusercontent.com/pimlie/ubuntu-mainline-kernel.sh/master/ubuntu-mainline-kernel.sh

ubuntu-mainline-kernel.sh -i v5.10.0

wget http://launchpadlibrarian.net/520233550/linux-libc-dev_5.10.0-14.15_amd64.deb
dpkg -i linux-libc-dev_5.10.0-14.15_amd64.deb

sudo  dpkg-query -L linux-libc-dev | grep videodev2.h
/usr/include/linux/videodev2.h

export EDGEX_SECURITY_SECRET_STORE=false
&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=&#34;device-profile-for-onvifsnapshot&#34;&gt;device profile for OnvifSnapshot&lt;/h1&gt;

&lt;pre&gt;&lt;code&gt;deviceResources:
  - name: &amp;quot;OnvifSnapshot&amp;quot;
      description: &amp;quot;snapshot from first ONVIF MediaProfile&amp;quot;
      properties:
        valueType: &amp;quot;Binary&amp;quot;
        readWrite: &amp;quot;R&amp;quot;
        mediaType: &amp;quot;image/jpeg&amp;quot;
deviceCommands:
  - name: &amp;quot;OnvifSnapshot&amp;quot;
    isHidden: false
    readWrite: &amp;quot;R&amp;quot;
    resourceOperations:
      - { deviceResource: &amp;quot;OnvifSnapshot&amp;quot; }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;http://&lt;device-service&gt;:59985/api/v2/device/name/Camera001/OnvifSnapshot&lt;/p&gt;

&lt;p&gt;下载的文件为CBOR编码。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>搭建Edgex设备服务开发环境</title>
      <link>https://wubigo.com/post/edgex-device-service-dev-env-setup/</link>
      <pubDate>Fri, 11 Mar 2022 15:39:42 +0800</pubDate>
      
      <guid>https://wubigo.com/post/edgex-device-service-dev-env-setup/</guid>
      <description>

&lt;p&gt;搭建EDGEX设备服务开发环境&lt;/p&gt;

&lt;h1 id=&#34;edgex简介&#34;&gt;EDGEX简介&lt;/h1&gt;

&lt;p&gt;EdgeX Foundry 项目成立于2017年，由Linux 基金会主持，目前已经拥有75个会员， 包括重量级的SAMSUNG，Dell，AMD，ANALOG DEVICES &amp;hellip; 但其中最重要的角色其实是戴尔。它为EdgeX Foundry提供该公司采用Apache 2.0许可证的FUSE源代码。FUSE包括10多种微服务和12500多万行代码，它们在连接标准、边缘分析、安全、系统管理和服务之间提供了互操作性。FUSE 是Dell 为了拓展边缘计算物联网服务而发展出来的，基于Java SPRING CLOUD 的微服务框架软件。这套软件最大的特征是中立于任何硬件平台和操作系统，高度模块化，可自由扩展。Dell 从私有化完成的那天开始，我们见到它一系列的并购，其中并购VMware，EMC 等动作，都直接剑指云计算和物联网技术。FUSE 的发布，更昭示了Dell谋求转型的决心。物联网的繁荣非常地依赖于物联网生态企业，全球大型IT 公司谋求物联网布局，都会提供框架软件，再培养生态伙伴来形成落地应用。而在生态伙伴的培养过程中，开源的基础框架软件是非常容易被理解和吸收的。 这也是Dell 选择跟Linux 基金会合作，并捐赠和完善代码的重要原因：Dell 需要庞大的生态伙伴，而Linux 具有开源软件界强大的号召力和影响力。&lt;/p&gt;

&lt;p&gt;EdgeX Foundry原来是用Java写的，导致平台体积庞大，占用资源，后来Linux基金会用Go语言对其进行了重构.&lt;/p&gt;

&lt;p&gt;EdgeX Foundry是一系列松耦合、开源的微服务集合。该微服务集合构成了四个微服务层及两个增强的基础系统服务，这四个微服务层包含了从物理域数据采集到信息域数据处理等一系列的服务，另外两个基础系统服务为该四个服务层提供支撑服务。&lt;/p&gt;

&lt;p&gt;四个微服务层分别是：&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;设备服务负责采集数据及控制设备功能。&lt;/li&gt;
&lt;li&gt;核心服务负责本地存储分析和转发数据，以及控制命令下发。&lt;/li&gt;
&lt;li&gt;支持服务负责日志记录、任务调度、数据清理、规则引擎和告警通知。&lt;/li&gt;
&lt;li&gt;应用服务/导出服务负责上传数据到云端或第三方信息系统，以及接收控制命令转发给核心服务。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;两个增强基础系统服务：&lt;/p&gt;

&lt;p&gt;安全服务、管理服务这两个软件模块虽然不直接处理边缘计算的功能性业务，但是对于边缘计算的安全性和易用性来说很重要&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://wubigo.com/img/post/edgex-svr.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h1 id=&#34;启动edgex核心服务&#34;&gt;启动EDGEX核心服务&lt;/h1&gt;

&lt;pre&gt;&lt;code&gt;wget https://raw.githubusercontent.com/edgexfoundry/edgex-compose/jakarta/docker-compose-no-secty.yml


 docker-compose -f docker-compose-no-secty.yml up -d
&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=&#34;打开数据和控制服务调试开关&#34;&gt;打开数据和控制服务调试开关&lt;/h1&gt;

&lt;p&gt;在consul里面配置应用：&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://localhost:8500/ui/dc1/kv/edgex/appservices/2.0/app-rules-engine/Writable/LogLevel/edit&#34; target=&#34;_blank&#34;&gt;http://localhost:8500/ui/dc1/kv/edgex/appservices/2.0/app-rules-engine/Writable/LogLevel/edit&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;修改INFO为DEBUG&lt;/p&gt;

&lt;h1 id=&#34;在ide里面启动设备服务&#34;&gt;在IDE里面启动设备服务&lt;/h1&gt;

&lt;p&gt;以IP摄像头设备服务为例&lt;/p&gt;

&lt;h2 id=&#34;打开webcam&#34;&gt;打开WEBCAM&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://wubigo.com/post/webcam-to-ip-camera/&#34; target=&#34;_blank&#34;&gt;webcam-to-ip-camera&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;配置开发环境&#34;&gt;配置开发环境&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;git clone git@github.com:edgexfoundry/device-camera-go.git
git checkout jakarta
cd device-camera-go
go mod tidy
set EDGEX_SECURITY_SECRET_STORE=false
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;调整IDE的当前工作目录为：device-camera-go\cmd
否则，设备服务启动会找不到设备配置文件。&lt;/p&gt;

&lt;p&gt;或者移动资源文件到IDE当前工作目录&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;mv -rf cmd/res  .
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;打开设备服务调试日志并启动设备服务&#34;&gt;打开设备服务调试日志并启动设备服务&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;res/configuration.toml
@@ -1,5 +1,5 @@
 [Writable]
-LogLevel = &amp;quot;INFO&amp;quot;
+LogLevel = &amp;quot;DEBUG&amp;quot;



level=INFO ts=2022-03-11T08:13:54.8106393Z app=device-camera source=devices.go:87 msg=&amp;quot;Device Camera001 not found in Metadata, adding it ...&amp;quot;        
level=INFO ts=2022-03-11T08:13:54.8133486Z app=device-camera source=autodiscovery.go:33 msg=&amp;quot;AutoDiscovery stopped: disabled by configuration&amp;quot;       
level=INFO ts=2022-03-11T08:13:54.813521Z app=device-camera source=autodiscovery.go:42 msg=&amp;quot;AutoDiscovery stopped: ProtocolDiscovery not implemented&amp;quot;
level=INFO ts=2022-03-11T08:13:54.8137182Z app=device-camera source=message.go:50 msg=&amp;quot;Service dependencies resolved...&amp;quot;
level=INFO ts=2022-03-11T08:13:54.8137182Z app=device-camera source=message.go:51 msg=&amp;quot;Starting device-camera to be replaced by makefile &amp;quot;
level=INFO ts=2022-03-11T08:13:54.8137182Z app=device-camera source=message.go:55 msg=&amp;quot;Camera device service started&amp;quot;
level=INFO ts=2022-03-11T08:13:54.8137182Z app=device-camera source=message.go:58 msg=&amp;quot;Service started in: 649.0037ms&amp;quot;

&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;在edgex-device-rest日志查看启动的设备服务&#34;&gt;在edgex-device-rest日志查看启动的设备服务&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;docker logs -f edgex-device-rest
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;配置设备文件&#34;&gt;配置设备文件&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;[[DeviceList]]
Name = &amp;quot;Camera001&amp;quot;
ProfileName = &amp;quot;camera-bosch&amp;quot;
Location = &amp;quot;edgex lab&amp;quot;
  [DeviceList.Protocols]
    [DeviceList.Protocols.HTTP]
    Address = &amp;quot;localhost:56000&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;设备数据采集和控制&#34;&gt;设备数据采集和控制&lt;/h2&gt;

&lt;h3 id=&#34;查看设备所有的资源&#34;&gt;查看设备所有的资源&lt;/h3&gt;

&lt;p&gt;通过EDGEX元数据服务查看设备资源&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;curl -X GET http://localhost:59882/api/v2/device/name/Camera001
{
    &amp;quot;apiVersion&amp;quot;: &amp;quot;v2&amp;quot;,
    &amp;quot;statusCode&amp;quot;: 200,
    &amp;quot;deviceCoreCommand&amp;quot;: {
        &amp;quot;deviceName&amp;quot;: &amp;quot;Camera001&amp;quot;,
        &amp;quot;profileName&amp;quot;: &amp;quot;camera-bosch&amp;quot;,
        &amp;quot;coreCommands&amp;quot;: [
            {
                &amp;quot;name&amp;quot;: &amp;quot;OnvifProfileInformation&amp;quot;,
                &amp;quot;get&amp;quot;: true,
                &amp;quot;set&amp;quot;: true,
                &amp;quot;path&amp;quot;: &amp;quot;/api/v2/device/name/Camera001/OnvifProfileInformation&amp;quot;,
                &amp;quot;url&amp;quot;: &amp;quot;http://edgex-core-command:59882&amp;quot;,
                &amp;quot;parameters&amp;quot;: [
                    {
                        &amp;quot;resourceName&amp;quot;: &amp;quot;OnvifProfileInformation&amp;quot;,
                        &amp;quot;valueType&amp;quot;: &amp;quot;String&amp;quot;
                    }
                ]
            },
            {
                &amp;quot;name&amp;quot;: &amp;quot;TamperDetected&amp;quot;,
                &amp;quot;get&amp;quot;: true,
                &amp;quot;path&amp;quot;: &amp;quot;/api/v2/device/name/Camera001/TamperDetected&amp;quot;,
                &amp;quot;url&amp;quot;: &amp;quot;http://edgex-core-command:59882&amp;quot;,
                &amp;quot;parameters&amp;quot;: [
                    {
                        &amp;quot;resourceName&amp;quot;: &amp;quot;TamperDetected&amp;quot;,
                        &amp;quot;valueType&amp;quot;: &amp;quot;Bool&amp;quot;
                    }
                ]
            },
            {
                &amp;quot;name&amp;quot;: &amp;quot;occupancy&amp;quot;,
                &amp;quot;get&amp;quot;: true,
                &amp;quot;path&amp;quot;: &amp;quot;/api/v2/device/name/Camera001/occupancy&amp;quot;,
                &amp;quot;url&amp;quot;: &amp;quot;http://edgex-core-command:59882&amp;quot;,
                &amp;quot;parameters&amp;quot;: [
                    {
                        &amp;quot;resourceName&amp;quot;: &amp;quot;occupancy&amp;quot;,
                        &amp;quot;valueType&amp;quot;: &amp;quot;Uint32&amp;quot;
                    }
                ]
            },
            {
                &amp;quot;name&amp;quot;: &amp;quot;OnvifReboot&amp;quot;,
                &amp;quot;get&amp;quot;: true,
                &amp;quot;set&amp;quot;: true,
                &amp;quot;path&amp;quot;: &amp;quot;/api/v2/device/name/Camera001/OnvifReboot&amp;quot;,
                &amp;quot;url&amp;quot;: &amp;quot;http://edgex-core-command:59882&amp;quot;,
                &amp;quot;parameters&amp;quot;: [
                    {
                        &amp;quot;resourceName&amp;quot;: &amp;quot;OnvifReboot&amp;quot;,
                        &amp;quot;valueType&amp;quot;: &amp;quot;Bool&amp;quot;
                    }
                ]
            },
            {
                &amp;quot;name&amp;quot;: &amp;quot;counter&amp;quot;,
                &amp;quot;get&amp;quot;: true,
                &amp;quot;path&amp;quot;: &amp;quot;/api/v2/device/name/Camera001/counter&amp;quot;,
                &amp;quot;url&amp;quot;: &amp;quot;http://edgex-core-command:59882&amp;quot;,
                &amp;quot;parameters&amp;quot;: [
                    {
                        &amp;quot;resourceName&amp;quot;: &amp;quot;counter&amp;quot;,
                        &amp;quot;valueType&amp;quot;: &amp;quot;Uint32&amp;quot;
                    }
                ]
            },
            {
                &amp;quot;name&amp;quot;: &amp;quot;OnvifDeviceInformation&amp;quot;,
                &amp;quot;get&amp;quot;: true,
                &amp;quot;set&amp;quot;: true,
                &amp;quot;path&amp;quot;: &amp;quot;/api/v2/device/name/Camera001/OnvifDeviceInformation&amp;quot;,
                &amp;quot;url&amp;quot;: &amp;quot;http://edgex-core-command:59882&amp;quot;,
                &amp;quot;parameters&amp;quot;: [
                    {
                        &amp;quot;resourceName&amp;quot;: &amp;quot;OnvifDeviceInformation&amp;quot;,
                        &amp;quot;valueType&amp;quot;: &amp;quot;String&amp;quot;
                    }
                ]
            },
            {
                &amp;quot;name&amp;quot;: &amp;quot;OnvifDateTime&amp;quot;,
                &amp;quot;get&amp;quot;: true,
                &amp;quot;set&amp;quot;: true,
                &amp;quot;path&amp;quot;: &amp;quot;/api/v2/device/name/Camera001/OnvifDateTime&amp;quot;,
                &amp;quot;url&amp;quot;: &amp;quot;http://edgex-core-command:59882&amp;quot;,
                &amp;quot;parameters&amp;quot;: [
                    {
                        &amp;quot;resourceName&amp;quot;: &amp;quot;OnvifDateTime&amp;quot;,
                        &amp;quot;valueType&amp;quot;: &amp;quot;String&amp;quot;
                    }
                ]
            },
            {
                &amp;quot;name&amp;quot;: &amp;quot;OnvifDns&amp;quot;,
                &amp;quot;get&amp;quot;: true,
                &amp;quot;set&amp;quot;: true,
                &amp;quot;path&amp;quot;: &amp;quot;/api/v2/device/name/Camera001/OnvifDns&amp;quot;,
                &amp;quot;url&amp;quot;: &amp;quot;http://edgex-core-command:59882&amp;quot;,
                &amp;quot;parameters&amp;quot;: [
                    {
                        &amp;quot;resourceName&amp;quot;: &amp;quot;OnvifDns&amp;quot;,
                        &amp;quot;valueType&amp;quot;: &amp;quot;String&amp;quot;
                    }
                ]
            },
            {
                &amp;quot;name&amp;quot;: &amp;quot;OnvifNetworkProtocols&amp;quot;,
                &amp;quot;get&amp;quot;: true,
                &amp;quot;set&amp;quot;: true,
                &amp;quot;path&amp;quot;: &amp;quot;/api/v2/device/name/Camera001/OnvifNetworkProtocols&amp;quot;,
                &amp;quot;url&amp;quot;: &amp;quot;http://edgex-core-command:59882&amp;quot;,
                &amp;quot;parameters&amp;quot;: [
                    {
                        &amp;quot;resourceName&amp;quot;: &amp;quot;OnvifNetworkProtocols&amp;quot;,
                        &amp;quot;valueType&amp;quot;: &amp;quot;String&amp;quot;
                    }
                ]
            },
            {
                &amp;quot;name&amp;quot;: &amp;quot;OnvifNetworkDefaultGateway&amp;quot;,
                &amp;quot;get&amp;quot;: true,
                &amp;quot;set&amp;quot;: true,
                &amp;quot;path&amp;quot;: &amp;quot;/api/v2/device/name/Camera001/OnvifNetworkDefaultGateway&amp;quot;,
                &amp;quot;url&amp;quot;: &amp;quot;http://edgex-core-command:59882&amp;quot;,
                &amp;quot;parameters&amp;quot;: [
                    {
                        &amp;quot;resourceName&amp;quot;: &amp;quot;OnvifNetworkDefaultGateway&amp;quot;,
                        &amp;quot;valueType&amp;quot;: &amp;quot;String&amp;quot;
                    }
                ]
            },
            {
                &amp;quot;name&amp;quot;: &amp;quot;OnvifNetworkInterfaces&amp;quot;,
                &amp;quot;get&amp;quot;: true,
                &amp;quot;set&amp;quot;: true,
                &amp;quot;path&amp;quot;: &amp;quot;/api/v2/device/name/Camera001/OnvifNetworkInterfaces&amp;quot;,
                &amp;quot;url&amp;quot;: &amp;quot;http://edgex-core-command:59882&amp;quot;,
                &amp;quot;parameters&amp;quot;: [
                    {
                        &amp;quot;resourceName&amp;quot;: &amp;quot;OnvifNetworkInterfaces&amp;quot;,
                        &amp;quot;valueType&amp;quot;: &amp;quot;String&amp;quot;
                    }
                ]
            },
            {
                &amp;quot;name&amp;quot;: &amp;quot;OnvifNtp&amp;quot;,
                &amp;quot;get&amp;quot;: true,
                &amp;quot;set&amp;quot;: true,
                &amp;quot;path&amp;quot;: &amp;quot;/api/v2/device/name/Camera001/OnvifNtp&amp;quot;,
                &amp;quot;url&amp;quot;: &amp;quot;http://edgex-core-command:59882&amp;quot;,
                &amp;quot;parameters&amp;quot;: [
                    {
                        &amp;quot;resourceName&amp;quot;: &amp;quot;OnvifNtp&amp;quot;,
                        &amp;quot;valueType&amp;quot;: &amp;quot;String&amp;quot;
                    }
                ]
            },
            {
                &amp;quot;name&amp;quot;: &amp;quot;OnvifUsers&amp;quot;,
                &amp;quot;get&amp;quot;: true,
                &amp;quot;set&amp;quot;: true,
                &amp;quot;path&amp;quot;: &amp;quot;/api/v2/device/name/Camera001/OnvifUsers&amp;quot;,
                &amp;quot;url&amp;quot;: &amp;quot;http://edgex-core-command:59882&amp;quot;,
                &amp;quot;parameters&amp;quot;: [
                    {
                        &amp;quot;resourceName&amp;quot;: &amp;quot;OnvifUsers&amp;quot;,
                        &amp;quot;valueType&amp;quot;: &amp;quot;String&amp;quot;
                    }
                ]
            },
            {
                &amp;quot;name&amp;quot;: &amp;quot;OnvifSnapshot&amp;quot;,
                &amp;quot;get&amp;quot;: true,
                &amp;quot;path&amp;quot;: &amp;quot;/api/v2/device/name/Camera001/OnvifSnapshot&amp;quot;,
                &amp;quot;url&amp;quot;: &amp;quot;http://edgex-core-command:59882&amp;quot;,
                &amp;quot;parameters&amp;quot;: [
                    {
                        &amp;quot;resourceName&amp;quot;: &amp;quot;OnvifSnapshot&amp;quot;,
                        &amp;quot;valueType&amp;quot;: &amp;quot;Binary&amp;quot;
                    }
                ]
            },
            {
                &amp;quot;name&amp;quot;: &amp;quot;OnvifUser&amp;quot;,
                &amp;quot;get&amp;quot;: true,
                &amp;quot;set&amp;quot;: true,
                &amp;quot;path&amp;quot;: &amp;quot;/api/v2/device/name/Camera001/OnvifUser&amp;quot;,
                &amp;quot;url&amp;quot;: &amp;quot;http://edgex-core-command:59882&amp;quot;,
                &amp;quot;parameters&amp;quot;: [
                    {
                        &amp;quot;resourceName&amp;quot;: &amp;quot;OnvifUser&amp;quot;,
                        &amp;quot;valueType&amp;quot;: &amp;quot;String&amp;quot;
                    }
                ]
            },
            {
                &amp;quot;name&amp;quot;: &amp;quot;OnvifHostname&amp;quot;,
                &amp;quot;get&amp;quot;: true,
                &amp;quot;set&amp;quot;: true,
                &amp;quot;path&amp;quot;: &amp;quot;/api/v2/device/name/Camera001/OnvifHostname&amp;quot;,
                &amp;quot;url&amp;quot;: &amp;quot;http://edgex-core-command:59882&amp;quot;,
                &amp;quot;parameters&amp;quot;: [
                    {
                        &amp;quot;resourceName&amp;quot;: &amp;quot;OnvifHostname&amp;quot;,
                        &amp;quot;valueType&amp;quot;: &amp;quot;String&amp;quot;
                    }
                ]
            },
            {
                &amp;quot;name&amp;quot;: &amp;quot;MotionDetected&amp;quot;,
                &amp;quot;get&amp;quot;: true,
                &amp;quot;path&amp;quot;: &amp;quot;/api/v2/device/name/Camera001/MotionDetected&amp;quot;,
                &amp;quot;url&amp;quot;: &amp;quot;http://edgex-core-command:59882&amp;quot;,
                &amp;quot;parameters&amp;quot;: [
                    {
                        &amp;quot;resourceName&amp;quot;: &amp;quot;MotionDetected&amp;quot;,
                        &amp;quot;valueType&amp;quot;: &amp;quot;Bool&amp;quot;
                    }
                ]
            },
            {
                &amp;quot;name&amp;quot;: &amp;quot;OnvifStreamURI&amp;quot;,
                &amp;quot;get&amp;quot;: true,
                &amp;quot;path&amp;quot;: &amp;quot;/api/v2/device/name/Camera001/OnvifStreamURI&amp;quot;,
                &amp;quot;url&amp;quot;: &amp;quot;http://edgex-core-command:59882&amp;quot;,
                &amp;quot;parameters&amp;quot;: [
                    {
                        &amp;quot;resourceName&amp;quot;: &amp;quot;OnvifStreamURI&amp;quot;,
                        &amp;quot;valueType&amp;quot;: &amp;quot;String&amp;quot;
                    }
                ]
            },
            {
                &amp;quot;name&amp;quot;: &amp;quot;OnvifHostnameFromDHCP&amp;quot;,
                &amp;quot;get&amp;quot;: true,
                &amp;quot;set&amp;quot;: true,
                &amp;quot;path&amp;quot;: &amp;quot;/api/v2/device/name/Camera001/OnvifHostnameFromDHCP&amp;quot;,
                &amp;quot;url&amp;quot;: &amp;quot;http://edgex-core-command:59882&amp;quot;,
                &amp;quot;parameters&amp;quot;: [
                    {
                        &amp;quot;resourceName&amp;quot;: &amp;quot;OnvifHostnameFromDHCP&amp;quot;,
                        &amp;quot;valueType&amp;quot;: &amp;quot;Bool&amp;quot;
                    }
                ]
            }
        ]
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;访问设备资源&#34;&gt;访问设备资源&lt;/h3&gt;

&lt;p&gt;设备的资源地址为上面接口返回的信息：url+path  (设备控制服务)&lt;/p&gt;

&lt;p&gt;例如: &lt;a href=&#34;http://edgex-core-command:59882/api/v2/device/name/Camera001/OnvifHostnameFromDHCP&#34; target=&#34;_blank&#34;&gt;OnvifHostnameFromDHCP&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;设备控制服务会调用实际的设备服务的API:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;docker logs -f edgex-core-command 

edgex-core-command           | level=ERROR ts=2022-03-11T08:23:01.759949942Z app=core-command source=http.go:47 X-Correlation-ID=8a4c186d-6f40-464f-be03-b5e67c866d3b msg=&amp;quot;failed to send a http request -&amp;gt; Get \&amp;quot;http://localhost:59985/api/v2/device/name/Camera001/OnvifHostname\&amp;quot;: dial tcp 127.0.0.1:59985: connect: connection refused&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;因为设备服务启动的时候，配置的ip为LOCALHOST, 容器内现在无法访问到设备服务实例API, 所以连接拒绝&lt;/p&gt;

&lt;p&gt;在设备服务所在网络浏览器直接上面的地址即可&lt;/p&gt;

&lt;h1 id=&#34;清理测试环境&#34;&gt;清理测试环境&lt;/h1&gt;

&lt;pre&gt;&lt;code&gt;docker-compose -f docker-compose-no-secty.yml down
docker volume rm $(docker volume ls -q)
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>OpenAPI vs AsyncAPI</title>
      <link>https://wubigo.com/post/openapi-vs-asyncapi/</link>
      <pubDate>Sat, 26 Feb 2022 21:55:15 +0800</pubDate>
      
      <guid>https://wubigo.com/post/openapi-vs-asyncapi/</guid>
      <description>&lt;p&gt;&lt;img src=&#34;https://wubigo.com/img/post/multi-runtime.jpg&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://wubigo.com/img/post/openap-vs-asyncapi-1.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://wubigo.com/img/post/openap-vs-asyncapi-2.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;[1] &lt;a href=&#34;https://www.asyncapi.com/docs/getting-started/coming-from-openapi&#34; target=&#34;_blank&#34;&gt;https://www.asyncapi.com/docs/getting-started/coming-from-openapi&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Redis消息队列和实时数据处理</title>
      <link>https://wubigo.com/post/redis-as-real-time-database/</link>
      <pubDate>Sat, 05 Feb 2022 11:40:58 +0800</pubDate>
      
      <guid>https://wubigo.com/post/redis-as-real-time-database/</guid>
      <description>

&lt;h1 id=&#34;redis&#34;&gt;REDIS&lt;/h1&gt;

&lt;p&gt;Redis (Remote Dictionary Server)是一个流行的开源内存
提供高级键值抽象的键值存储。
Redis 是单线程的，它只处理一个命令
客户端在进程的主线程中一次。 不同于传统的KV
键是简单数据类型（通常是字符串）的系统，键
在 Redis 中可以用作复杂的数据类型，例如哈希、列表、
集和排序集。 此外，Redis 支持复杂的原子
对这些数据类型的操作（例如，从
一个列表，将具有给定分数的新值插入排序集等）。
Redis 抽象和高摄取速度已被证明特别重要
对于许多延迟敏感的任务很有用。 因此，Redis
已获得广泛采用，并被越来越多的人使用
生产环境中的公司.&lt;/p&gt;

&lt;p&gt;Redis 支持高可用性和持久性。 高可用性
是通过将数据从主节点复制到
从节点并同步它们。 当一个主进程失败时，它的
对应的从属进程已准备好接管后续进程
称为故障转移。 持久性可以通过以下任一方式配置
以下两个选项：&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;使用时间点快照文件
称为 RDB（Redis 数据库）&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;使用名为AOF（仅附加文件）。&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;注意这三种机制（AOF重写、RDB 快照和复制）依赖 fork 获取
进程内存的时间点快照并将其序列化
（而主进程继续为客户端命令提供服务）&lt;/p&gt;

&lt;h1 id=&#34;项目简介&#34;&gt;项目简介&lt;/h1&gt;

&lt;p&gt;最近在做工业自动化(IIoT)项目，涉及到很多场景需要对一系列设备进行监控和信号处理。
该类场景对实时处理能力，系统稳定性，高可用性，容灾能力等等要求非常高。
其中几个核心的需求：&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;设备数据不能丢失&lt;/li&gt;
&lt;li&gt;实时告警(毫秒级延迟)&lt;/li&gt;
&lt;li&gt;设备数据必须优先在边缘节点处理，边缘节点的物理服务器只有两台&lt;/li&gt;
&lt;li&gt;每个边缘节点接入的设备上行数据量大概6万点/秒，数据包小于1K&lt;/li&gt;
&lt;li&gt;中心需要汇聚和分析所有边缘节点的设备数据&lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&#34;技术现状&#34;&gt;技术现状&lt;/h1&gt;

&lt;h2 id=&#34;实时数据处理&#34;&gt;实时数据处理&lt;/h2&gt;

&lt;p&gt;实时数据处理是一个自 1990 年代以来一直在研究的问题 。
产生的数据量增加了，加上越来越复杂的软件解决方案
开发，需要满足这些需求出现了流式应用程序，例如
欺诈检测、网络监控和电子交易依赖于实时数据处理
确保所提供的服务被认为是正确和可靠的。
绝大多数现代应用程序使用某种数据库管理系统
处理数据。当应用程序收集或生成数据时，它会被存储和索引
它可以在以后由应用程序查询。但是，对于具有更严格
的实时数据处理的要求，这不是一个合适的选项，而是流
处理开始发挥作用的地方。流处理在接收数据时直接处理数据。实时流
处理应用程序通常具有必须满足的某些关键要求。有的
输入和处理后的数据输出之间的延迟是实现实时的关键特征
应用。更传统的批处理方法需要以这样的方式收集数据
称为批次，其中处理只能在每个批次的最终数据块完成后开始
到达的。对于实时用例，这导致的延迟是不可接受的，因为这些实时的延迟
流应用程序最好在毫秒内。&lt;/p&gt;

&lt;h2 id=&#34;现有资源&#34;&gt;现有资源&lt;/h2&gt;

&lt;p&gt;公司现有的工控产品都是基于微服务架构实现的。用于满足超大型集团公司
工控自动化需求:DEV/OPS，PaaS，双活，AI/OPS等。需要上百个虚机来支
撑现有的工控平台。&lt;/p&gt;

&lt;h1 id=&#34;技术调研&#34;&gt;技术调研&lt;/h1&gt;

&lt;h2 id=&#34;更换消息中间件&#34;&gt;更换消息中间件&lt;/h2&gt;

&lt;p&gt;使用REDIS STREAM替换消息中间件。
在测试中，发现REDIS作为队列，使用比较方便：&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;消息队列动态创建，目前以时间戳为标识方便处理(例如&amp;rdquo;STREAM:02041123&amp;rdquo;)&lt;/li&gt;
&lt;li&gt;消息队列消费完后删除，释放内存( isDelived &amp;amp;&amp;amp; isSaved  -&amp;gt; redisson.getKeys().delete(&amp;ldquo;STREAM:02041123&amp;rdquo;))&lt;/li&gt;
&lt;li&gt;动态检查消息队列列表，如果没有消费，立即处理(redisson.getKeys())&lt;/li&gt;
&lt;li&gt;主节点配置为缓存，从节点配置为存储&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;经过测试，现在redis消息队列每小时能处理2千万条的设备数据。
还需要进一步优化写入速度。&lt;/p&gt;

&lt;h3 id=&#34;redis消息处理确认流程图&#34;&gt;REDIS消息处理确认流程图&lt;/h3&gt;

&lt;p&gt;&lt;img src=&#34;https://wubigo.com/img/redis-stream.svg&#34; alt=&#34;REDIS消息队列&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;更换分布式监控&#34;&gt;更换分布式监控&lt;/h2&gt;

&lt;h2 id=&#34;更换实时数据库&#34;&gt;更换实时数据库&lt;/h2&gt;

&lt;h1 id=&#34;redis数据可靠性&#34;&gt;REDIS数据可靠性&lt;/h1&gt;

&lt;h2 id=&#34;redis-on-flash&#34;&gt;REDIS ON FLASH&lt;/h2&gt;

&lt;p&gt;在许多情况下，SSD 的高性能也将延迟和吞吐量的性能瓶颈从设备 I/O 转移到了网络上。
对于应用程序而言，将其架构设计为将数据存储在本地 SSD 上而不是使用远程数据存储
服务变得更具吸引力。 这增加了对可嵌入应用程序的键值存储引擎的需求.&lt;/p&gt;

&lt;p&gt;RocksDB单节点的存储上限是100GB，超过100GB需要使用分区。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://wubigo.com/img/redis-on-flash.svg&#34; alt=&#34;REDIS ON FLASH&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;redis-shard&#34;&gt;REDIS SHARD&lt;/h2&gt;

&lt;h2 id=&#34;参考&#34;&gt;参考&lt;/h2&gt;

&lt;p&gt;[1] &lt;a href=&#34;https://www.doria.fi/bitstream/handle/10024/177865/tallberg_sebastian.pdf?sequence=2&amp;amp;isAllowed=y&#34; target=&#34;_blank&#34;&gt;A COMPARISON OF DATA INGESTION PLATFORMS IN REAL-TIME STREAMING&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;[2] &lt;a href=&#34;https://www.alibabacloud.com/blog/interview-with-the-creator-of-redisson-building-an-open-source-enterprise-redis-client_593854&#34; target=&#34;_blank&#34;&gt;Interview with the Creator of Redisson&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;[3] &lt;a href=&#34;https://engineering.linkedin.com/distributed-systems/log-what-every-software-engineer-should-know-about-real-time-datas-unifying&#34; target=&#34;_blank&#34;&gt;What every software engineer should know about real-time data&amp;rsquo;s unifying abstraction&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;[4] &lt;a href=&#34;http://www.kereno.com/rocksdb-rof.pdf&#34; target=&#34;_blank&#34;&gt;Optimization of RocksDB for Redis on Flash&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;[5] &lt;a href=&#34;https://github.com/RedisLabs/memtier_benchmark&#34; target=&#34;_blank&#34;&gt;Memtier benchmark&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;[6] &lt;a href=&#34;https://tikv.org/docs/5.1/reference/architecture/overview/&#34; target=&#34;_blank&#34;&gt;Distributed key-value database&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;[7] &lt;a href=&#34;https://dl.acm.org/doi/fullHtml/10.1145/3483840&#34; target=&#34;_blank&#34;&gt;Evolution of Development in a Key-value Store Serving Large-scale Applications&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;[8] &lt;a href=&#34;https://cloud.google.com/compute/docs/disks/performance&#34; target=&#34;_blank&#34;&gt;Block storage performance&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;[9] &lt;a href=&#34;https://www.cockroachlabs.com/blog/cockroachdb-on-rocksd/&#34; target=&#34;_blank&#34;&gt;built CockroachDB on top of RocksDB&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;[10] &lt;a href=&#34;https://www.usenix.org/system/files/conference/fast16/fast16-papers-lu.pdf&#34; target=&#34;_blank&#34;&gt;Separating Keys from Values in SSD-conscious Storage&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>虎年新春快乐</title>
      <link>https://wubigo.com/post/happy-lunar-new-year-of-tiger/</link>
      <pubDate>Tue, 01 Feb 2022 09:37:46 +0800</pubDate>
      
      <guid>https://wubigo.com/post/happy-lunar-new-year-of-tiger/</guid>
      <description>&lt;p&gt;虎年新春快乐&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Maybe this year, we ought to walk through the rooms of our lives not
looking for flaws, but looking for potential—Ellen Goodman&lt;/p&gt;
&lt;/blockquote&gt;
</description>
    </item>
    
    <item>
      <title>2021 Notes</title>
      <link>https://wubigo.com/post/notes-2021/</link>
      <pubDate>Sat, 01 Jan 2022 16:59:00 +0800</pubDate>
      
      <guid>https://wubigo.com/post/notes-2021/</guid>
      <description>

&lt;h2 id=&#34;社会价值&#34;&gt;社会价值&lt;/h2&gt;

&lt;p&gt;个人的价值在于为别人和社会解决问题和提供帮助，在帮助别人的过程
中促进个人成长。读书不是目的，读书只是为大脑提供了输入，产生对
社会有用的输出才是读书的真正目的&lt;/p&gt;

&lt;h2 id=&#34;思考&#34;&gt;思考&lt;/h2&gt;

&lt;p&gt;思考比行动重要。害怕思考，草率行动是懒惰的表现。思考就是抑制动物的
本性过程，思考是个人成长的最快途径&lt;/p&gt;

&lt;h2 id=&#34;沟通&#34;&gt;沟通&lt;/h2&gt;

&lt;p&gt;理解对方是沟通的前提条件。沟通就是让对方认识到自己提议的价值，
让对方受益。无论沟通的对象是朋友，家人，同事，不要首先想着
如何改变别人，重要的调整自己。&lt;/p&gt;

&lt;h2 id=&#34;业务和技术&#34;&gt;业务和技术&lt;/h2&gt;

&lt;p&gt;软件解决方案的出发点是解决客户问题。解决问题与技术的先进性与否无关，
很多情况下解决方案取决于公司的组织形式和资源条件。运维成本是大型
软件解决方案最主要的成本。监控的目的在于预防失败。
越早发现问题，解决成本越低。&lt;/p&gt;

&lt;h2 id=&#34;知识积累&#34;&gt;知识积累&lt;/h2&gt;

&lt;p&gt;价值与风险是统一的，看待机会既要看到可能的价值，同时认识到风险。
巨大的价值必然伴随着巨大的风险。偶然发现的所谓的价值机会可能只是
一个无知陷阱。知识和财富不仅在于积累更在于传承。财富最重要的是
在于保值。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Mainflux Dev Setup</title>
      <link>https://wubigo.com/post/mainflux-dev-setup/</link>
      <pubDate>Mon, 20 Dec 2021 17:04:37 +0800</pubDate>
      
      <guid>https://wubigo.com/post/mainflux-dev-setup/</guid>
      <description>

&lt;h1 id=&#34;build&#34;&gt;BUILD&lt;/h1&gt;

&lt;pre&gt;&lt;code&gt;mkdir -p $GOPATH/src/github.com/mailflux
git clone https://github.com/wubigo/mainflux.git
cd github.com/mailflux/mailflux/
make
make dockers_dev
make run
&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=&#34;provision-the-system&#34;&gt;Provision the System&lt;/h1&gt;

&lt;pre&gt;&lt;code&gt;mainflux-cli provision test
&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=&#34;get-token&#34;&gt;GET TOKEN&lt;/h1&gt;

&lt;pre&gt;&lt;code&gt;curl -k https://172.21.53.253/tokens

{
  &amp;quot;email&amp;quot;: &amp;quot;bold_gould@email.com&amp;quot;,
  &amp;quot;password&amp;quot;: &amp;quot;12345678&amp;quot;
}

&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>Connect KEPServer to Ali IoT</title>
      <link>https://wubigo.com/post/connect-kepserver-to-ali-iot/</link>
      <pubDate>Thu, 16 Dec 2021 13:40:38 +0800</pubDate>
      
      <guid>https://wubigo.com/post/connect-kepserver-to-ali-iot/</guid>
      <description>

&lt;p&gt;Configure an MQTT Client Agent within the IoT Gateway Plug-In for KEPServerEX&lt;/p&gt;

&lt;p&gt;to send data to Ali IoT. The connection can be made using MQTT over Transmission&lt;/p&gt;

&lt;p&gt;Control Protocol (TCP) and MQTT over Transport Layer Security (TLS).&lt;/p&gt;

&lt;p&gt;set up Kepware KEPServerEX IoT Gateway on Windows to connect with the MQTT bridge&lt;/p&gt;

&lt;p&gt;of IoT Core to push streaming data to Cloud and send control messages from IoT&lt;/p&gt;

&lt;p&gt;Core back to KEPServerEX&lt;/p&gt;

&lt;p&gt;IoT Gateway is a module that provides integration with external IT systems&lt;/p&gt;

&lt;p&gt;and cloud platforms through a series of protocols such as MQTT and HTTP.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://wubigo.com/img/post/kepserverex-iot.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;A random value simulator sends values to IoT Gateway.&lt;/li&gt;
&lt;li&gt;Values go through the IoT Gateway to IoT Core.&lt;/li&gt;
&lt;li&gt;IoT Core bridges the values to Pub/Sub.&lt;/li&gt;
&lt;li&gt;Users send command messages through IoT Core.&lt;/li&gt;
&lt;li&gt;Command messages go through IoT Core to the IoT Gateway.&lt;/li&gt;
&lt;li&gt;IoT Gateway delivers the messages to the simulated device.&lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&#34;setup&#34;&gt;setup&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;Install Kepware KEPServerEX.&lt;/li&gt;
&lt;li&gt;Install PowerShell.&lt;/li&gt;
&lt;li&gt;Create or select a Cloud project.&lt;/li&gt;
&lt;li&gt;Enable Kepware KEPServerEX Configuration API Service.&lt;/li&gt;
&lt;li&gt;Install the Cloud SDK.&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;detail&#34;&gt;detail&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;Generate a self-signed certificate authority (CA) certificate.&lt;/li&gt;
&lt;li&gt;Provision an IoT Core device on Google Cloud.&lt;/li&gt;
&lt;li&gt;Configure Kepware KEPServerEX IoT Gateway as an IoT Core device.&lt;/li&gt;
&lt;li&gt;Set up a Windows scheduled task to refresh the JSON Web Token (JWT).&lt;/li&gt;
&lt;li&gt;Set up the Kepware KEPServerEX IoT Gateway to send simulated metrics to IoT Core, and verify on Pub/Sub.&lt;/li&gt;
&lt;li&gt;Set up the Kepware KEPServerEX IoT Gateway to receive command messages and send commands from IoT Core.&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;data-collect&#34;&gt;data collect&lt;/h1&gt;

&lt;p&gt;Read data from onsite equipment using industrial protocols such as OPC-UA, Modbus and  EtherNet/IP&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
